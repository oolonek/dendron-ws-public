{"pageProps":{"note":{"id":"lMQteElOhGrkKcI7EOr8o","title":"Multivault","desc":"","updated":1629649185083,"created":1629642713694,"custom":{},"fname":"dendron.multivault","type":"note","vault":{"fsPath":"vault"},"contentHash":"b3f729d3ddb1607d90c352a069c8b438","links":[{"from":{"fname":"tools.dendron.multivault","vaultName":"vault"},"type":"backlink","position":{"start":{"line":130,"column":1,"offset":3394},"end":{"line":130,"column":23,"offset":3416},"indent":[]},"value":"dendron.multivault","alias":"dendron.multivault"}],"anchors":{"what-are-we-talking-about-":{"type":"header","text":"What are we talking about ?","value":"what-are-we-talking-about-","line":8,"column":0,"depth":1},"why-this-note-":{"type":"header","text":"Why this note ?","value":"why-this-note-","line":17,"column":0,"depth":1},"what-do-i-want-":{"type":"header","text":"What do I want ?","value":"what-do-i-want-","line":21,"column":0,"depth":1},"what-do-i-have-now-":{"type":"header","text":"What do I have now ?","value":"what-do-i-have-now-","line":34,"column":0,"depth":1},"recipe":{"type":"header","text":"Recipe","value":"recipe","line":88,"column":0,"depth":1},"questions-or-editions":{"type":"header","text":"Questions or editions","value":"questions-or-editions","line":175,"column":0,"depth":1}},"children":["0HNwN2BVtZRCgGI1AE0uD"],"parent":"rInb8zzM4kEHelz4CeWDa","data":{}},"body":"<h1 id=\"multivault\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#multivault\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Multivault</h1>\n<h1 id=\"what-are-we-talking-about-\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#what-are-we-talking-about-\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>What are we talking about ?</h1>\n<p>Multivault configuration is a way to put your Dendron notes into compartements.\nMultiple reason can lead you to head towards a multivaults setup.\nHere are some of them <a href=\"https://wiki.dendron.so/notes/24b176f1-685d-44e1-a1b0-1704b1a92ca0.html#use-cases\">https://wiki.dendron.so/notes/24b176f1-685d-44e1-a1b0-1704b1a92ca0.html#use-cases</a></p>\n<p>However they are multiple ways of setting up a multivault configuration.\nIn my case I have been wanting to set this up for a long time and tried at least 3 times with no success. </p>\n<h1 id=\"why-this-note-\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#why-this-note-\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Why this note ?</h1>\n<p>So I will write a note regarding the recipe I followed for what seems to be (up to now) a convenient solution for me. This is a note for my future self but also for people how have been having difficulties to setup up a multivault configurations.</p>\n<h1 id=\"what-do-i-want-\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#what-do-i-want-\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>What do I want ?</h1>\n<p>My requirements were the following ones:</p>\n<ul>\n<li>at least two vaults but possibility to accomodate more if needed</li>\n<li>all vaults should be git versioned and have a remote repo (github)</li>\n<li>the vaults should be git versioned on a private or public git repo </li>\n<li>all vaults should be possibly publishable as github pages</li>\n</ul>\n<p>One thing that confounded me at first was the distinction between vaults and workspace.\nAfter enough trial an error the setup I adopted is the following one.</p>\n<h1 id=\"what-do-i-have-now-\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#what-do-i-have-now-\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>What do I have now ?</h1>\n<p>I have 3 dendron <strong>workspaces</strong>. </p>\n<ul>\n<li><strong>dendron-global</strong></li>\n<li><strong>dendron-ws-private</strong></li>\n<li><strong>dendron-ws-public</strong></li>\n</ul>\n<p><strong>dendron-global</strong> and <strong>dendron-ws-private</strong> are git-versioned on a private github repos (<a href=\"https://github.com/oolonek/dendron-global\">https://github.com/oolonek/dendron-global</a> and <a href=\"https://github.com/oolonek/dendron-ws-private\">https://github.com/oolonek/dendron-ws-private</a>, respectively) while <strong>dendron-ws-public</strong> is versioned on a public repo (<a href=\"https://github.com/oolonek/dendron-ws-public\">https://github.com/oolonek/dendron-ws-public</a>). </p>\n<p>I did a 'Dendron: Vault add' command from the <strong>dendron-global</strong> vault to incorporate <strong>dendron-ws-private</strong> and <strong>dendron-ws-public</strong>.</p>\n<p>As a result I have three websites:</p>\n<p><a href=\"https://oolonek.github.io/dendron-global/\">https://oolonek.github.io/dendron-global/</a>\n<a href=\"https://oolonek.github.io/dendron-ws-private/\">https://oolonek.github.io/dendron-ws-private/</a>\n<a href=\"https://oolonek.github.io/dendron-ws-public/\">https://oolonek.github.io/dendron-ws-public/</a></p>\n<p>These reflect their own vaults (<strong>dendron-ws-private</strong> and <strong>dendron-ws-public</strong>) or the totality (dendron-global). </p>\n<p>See flowchart below : </p>\n<div class=\"mermaid\">\n   flowchart TB\n   subgraph dendron-global-workspace\n     dendron-global-workspace-vault.dendron-global-workspace[dendron-global-workspace-vault]\n   subgraph dendron-ws-private-workspace\n     dendron-ws-private-vault.dendron-ws-private-workspace[dendron-ws-private-vault]\n   end\n   subgraph dendron-ws-public-workspace\n     dendron-ws-public-vault.dendron-ws-public-workspace[dendron-ws-public-vault]\n   end\n   end\n   dendron-global-workspace --> dendron-global.git\n   dendron-ws-private-workspace --> dendron-ws-private.git\n   dendron-ws-public-workspace --> dendron-ws-public.git\n   dendron-global.git --> dendron-global.gitpage\n   dendron-ws-private.git --> dendron-ws-private.gitpage\n   dendron-ws-public.git --> dendron-ws-public.gitpage\n</div>\n<p>Where : </p>\n<ul>\n<li>dendron-global.git is <a href=\"https://github.com/oolonek/dendron-global\">https://github.com/oolonek/dendron-global</a> </li>\n<li>dendron-ws-private.git is <a href=\"https://github.com/oolonek/dendron-ws-private\">https://github.com/oolonek/dendron-ws-private</a></li>\n<li>dendron-ws-public.git is <a href=\"https://github.com/oolonek/dendron-ws-public\">https://github.com/oolonek/dendron-ws-public</a></li>\n</ul>\n<p>and</p>\n<ul>\n<li>dendron-global.gitpage is <a href=\"https://oolonek.github.io/dendron-global/\">https://oolonek.github.io/dendron-global/</a></li>\n<li>dendron-ws-private.gitpage is <a href=\"https://oolonek.github.io/dendron-ws-private/\">https://oolonek.github.io/dendron-ws-private/</a></li>\n<li>dendron-ws-public.gitpage is <a href=\"https://oolonek.github.io/dendron-ws-public/\">https://oolonek.github.io/dendron-ws-public/</a></li>\n</ul>\n<h1 id=\"recipe\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#recipe\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Recipe</h1>\n<ul>\n<li>\n<p>Initialize a new workspace by cmd+shit+p Dendron:Initialize Workspace\nName it as you want but let the default vault name as vault</p>\n</li>\n<li>\n<p>Go to Github and create new private or public repo as you wish</p>\n</li>\n<li>\n<p>Open VSCode at the workspace level (not at the vault level) and in terminal:</p>\n</li>\n</ul>\n<pre><code>git init\ngit add . \ngit commit -m 'initial commit'\ngit remote add origin https://github.com/oolonek/dendron-global.git\ngit push -u origin main\n(complains)\ngit pull origin main  \ngit config pull.rebase true\ngit pull origin main  \ngit push -u origin main\n</code></pre>\n<ul>\n<li>\n<p>repeat the previous steps for the two other workspaces</p>\n</li>\n<li>\n<p>We set up the repo so that they are publish automatically using the gh actions</p>\n</li>\n</ul>\n<p><a href=\"https://wiki.dendron.so/notes/230d0ccf-5758-4a8f-b39b-3b68e1482e2b.html\">https://wiki.dendron.so/notes/230d0ccf-5758-4a8f-b39b-3b68e1482e2b.html</a>\nand\n<a href=\"https://wiki.dendron.so/notes/877f4347-f013-43ba-aec4-87412b2e1bec.html\">https://wiki.dendron.so/notes/877f4347-f013-43ba-aec4-87412b2e1bec.html</a></p>\n<p>But follow only the steps required for gh action triggered publishing (no need for local publishing first)\nSo just change your dendron.yml  by adding</p>\n<pre><code>    siteUrl: https://oolonek.github.io\n    assetsPrefix: dendron-ws-public\n</code></pre>\n<ul>\n<li>To create the package.json at the ws roots we run from the terminal</li>\n</ul>\n<pre><code>npm init -y\nnpm install @dendronhq/dendron-cli@latest\nnpm install @dendronhq/dendron-11ty@latest\n</code></pre>\n<ul>\n<li>We modify the dendron.yml to have the gh edit link</li>\n</ul>\n<pre><code>    gh_edit_link: true\n    gh_edit_link_text: Click here to edit this page on Github !\n    gh_edit_repository: 'https://github.com/oolonek/dendron-ws-public'\n    gh_edit_branch: main\n    gh_edit_view_mode: edit\n    assetsPrefix: dendron-ws-public\n</code></pre>\n<ul>\n<li>\n<p>Repeat for all repos. </p>\n</li>\n<li>\n<p>Check that all websites publish correctly when you push a new note.</p>\n</li>\n<li>\n<p>Now at the vault level (not workspace level) of your global workspace (here called dendron-global in the previous schema) you cmd+shit+p Dendron: Vault Add/remote and paste the github adress of the repos you want to integrate.\nThis should automatically upgrade the dendron.yml of the global workspace.</p>\n</li>\n<li>\n<p>The last step is important else you will not be able to publish from the global repo. You need to add checkout actions to the .github/workflows/dendron-actions.yml See example below to checkout a publi and a private repo:</p>\n</li>\n</ul>\n<pre><code>            - name: Checkout source\n              uses: actions/checkout@v2\n\n            - name: Checkout public repo\n              uses: actions/checkout@v2\n              with:\n                repository: oolonek/dendron-ws-public\n                path: dendron-ws-public\n\n            - name: Checkout private repo\n              uses: actions/checkout@v2\n              with:\n                repository: oolonek/dendron-ws-private\n                token: ${{ secrets.BUILD_ACCESS_SECRET }} # `GitHub_PAT` is a secret that contains your PAT\n                path: dendron-ws-private\n\n</code></pre>\n<p>Note that you will need to prepare a PAT if you pull from a private repo.</p>\n<h1 id=\"questions-or-editions\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#questions-or-editions\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Questions or editions</h1>\n<p>Please comment directly on github by clicking the link below 👇</p>\n<hr>\n<strong>Children</strong>\n<ol>\n<li><a href=\"/dendron-ws-public/notes/0HNwN2BVtZRCgGI1AE0uD\">New_recipee</a></li>\n</ol>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/dendron-ws-public/notes/K2YZfA8sRComdK4Deuxz7\">Multivault</a></li>\n</ul>","noteIndex":{"id":"gvOH1py1NfW3ihejtp1nt","title":"Root","desc":"","updated":1629628449617,"created":1629628449617,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"35415410233b3af68001893c83fd0c46","links":[{"type":"wiki","from":{"fname":"root","id":"gvOH1py1NfW3ihejtp1nt","vaultName":"vault"},"value":"user.oolonek","alias":"@oolonek","position":{"start":{"line":5,"column":7,"offset":225},"end":{"line":5,"column":15,"offset":233},"indent":[]},"xvault":false,"to":{"fname":"user.oolonek"}}],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1}},"children":["kPtYPP8JzWBTzWz6JpnkS","3LmAI71UuDJHeWZiY9h96","TyTThFOL2RNC8FAIj5bZN","e4C8xkTTKKue3fz5ywgBH","u88hb42Nk8jvzQwtMfM3z","rInb8zzM4kEHelz4CeWDa","hUOQrqfgNFdSu7GD8fP2c","J9JmfJgjDT8Oz6WilFnKw","Iu50F9KOgYp0CDpwKBlx6","xZShWyRUMIXQaN30pKmCM","f1fsD9inrKMVapeKNhEhT","VhvHTRFNvIEee7odQvekB","D2j8S1AufMK6GbZTZ9BJz","HMvEFZAnQOxD77TnbVwGV","NYpAWkhSLKKkHIbDIbshA","0MSZusMXhweDvHD3Iggww","q5kFqQrTnytdWSux3nwOk","1PGMuBcw56lKG0Xu5sxIX","f4P2xBJLTHpQpJYiJh7BV","7KJGsaBJWOOHaHqElRaJq","BunyVngKi3As0C0CO5xhy","iRR8MxJPGIvfKl5pcOirA","3qcjidzC0tkyobYKlrWYc","uviazqrM9NUAMm9dWYVa7","7WpN3kiuBsunRJ17P3mGr","9j2pl0fgjc9tperwhyk7z9m","53WWGL5wGfRDGtBEJoqBd","EoQW6Rm5LYkkCxMgDVXHd","k7IyxWpd9nYqWlhZ96CAG","maJAMIUSNCqgSTXrQ7fu5","rrfMr3vOgkyJv21N8x99X"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top. \n\nKudos @oolonek, you did great job! \nWhen using https://oolonek.github.io/dendron-ws-private/, here is what I got:\n\n<img width=\"1676\" alt=\"Capture d’écran 2021-08-22 à 13 19 54\" src=\"https://user-images.githubusercontent.com/44283913/130353241-43ba98eb-d947-473c-be08-d924f0ef585b.png\">\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","siteUrl":"https://oolonek.github.io","gh_edit_link":true,"gh_edit_link_text":"Click here to edit this page on Github !","gh_edit_repository":"https://github.com/oolonek/dendron-ws-public","gh_edit_branch":"main","gh_edit_view_mode":"edit","assetsPrefix":"/dendron-ws-public","usePrettyRefs":true,"siteLastModified":true,"title":"GrndStt's Dendron","description":"Personal knowledge space","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_root":"docs/","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"dendronVersion":"0.77.1","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link","taskCompleteStatus":["done","x"]},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true,"enableFullHierarchyNoteTitle":false,"enableSmartRefs":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false,"enableFrontmatterTags":true,"enableHashesForFMTags":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true}}},"__N_SSG":true}