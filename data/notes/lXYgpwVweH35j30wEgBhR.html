<h1 id="pandas"><a aria-hidden="true" class="anchor-heading" href="#pandas"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Pandas</h1>
<h2 id="subset-a-df-according-to-string-present-in-columns-name"><a aria-hidden="true" class="anchor-heading" href="#subset-a-df-according-to-string-present-in-columns-name"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Subset a df according to string present in columns name</h2>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'alp'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>contains<span class="token punctuation">(</span><span class="token string">'alp'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
<h2 id="select-a-df-according-to-column-positions"><a aria-hidden="true" class="anchor-heading" href="#select-a-df-according-to-column-positions"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Select a df according to column positions</h2>
<p>Here from column seven till the end </p>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
</code></pre>
<h2 id="rename-columns"><a aria-hidden="true" class="anchor-heading" href="#rename-columns"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Rename columns</h2>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'oldName1'</span><span class="token punctuation">:</span> <span class="token string">'newName1'</span><span class="token punctuation">,</span> <span class="token string">'oldName2'</span><span class="token punctuation">:</span> <span class="token string">'newName2'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="rename-columns-or-index"><a aria-hidden="true" class="anchor-heading" href="#rename-columns-or-index"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Rename columns or index</h2>
<pre class="language-python"><code class="language-python">df_new <span class="token operator">=</span> df<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'A'</span><span class="token punctuation">:</span> <span class="token string">'Col_1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'ONE'</span><span class="token punctuation">:</span> <span class="token string">'Row_1'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Didnt work for me</p>
<p>df_merged_selected.index.rename('Row ID', inplace = True)
does</p>
<h2 id="rename-columns-by-position"><a aria-hidden="true" class="anchor-heading" href="#rename-columns-by-position"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Rename columns by position</h2>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>columns<span class="token operator">=</span><span class="token punctuation">{</span> df<span class="token punctuation">.</span>columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token string">"your value"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="add-prefix-or-suffix-to-colnames"><a aria-hidden="true" class="anchor-heading" href="#add-prefix-or-suffix-to-colnames"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Add prefix (or suffix) to colnames</h2>
<p>DataFrame.add_prefix(prefix)</p>
<h2 id="check-df-datatype"><a aria-hidden="true" class="anchor-heading" href="#check-df-datatype"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Check df datatype</h2>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>dtypes
</code></pre>
<h2 id="convert-to-a-specific-type"><a aria-hidden="true" class="anchor-heading" href="#convert-to-a-specific-type"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Convert to a specific type</h2>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>year<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="from-continuous-to-categorical"><a aria-hidden="true" class="anchor-heading" href="#from-continuous-to-categorical"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>From continuous to categorical</h1>
<pre class="language-python"><code class="language-python">pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>df<span class="token punctuation">.</span>Age<span class="token punctuation">,</span>bins<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">,</span>labels<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'Toddler/Baby'</span><span class="token punctuation">,</span><span class="token string">'Child'</span><span class="token punctuation">,</span><span class="token string">'Adult'</span><span class="token punctuation">,</span><span class="token string">'Elderly'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="merge-two-df-based-on-index"><a aria-hidden="true" class="anchor-heading" href="#merge-two-df-based-on-index"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Merge two df based on index</h1>
<pre class="language-python"><code class="language-python">pd<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>df1<span class="token punctuation">,</span> df2<span class="token punctuation">,</span> left_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> right_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="merge-two-df-based-on-columns"><a aria-hidden="true" class="anchor-heading" href="#merge-two-df-based-on-columns"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Merge two df based on columns</h1>
<p>pd.merge(student_df, staff_df, how='left', left_on='Name', right_on='Name')</p>
<h1 id="replace-specific-string-in-values"><a aria-hidden="true" class="anchor-heading" href="#replace-specific-string-in-values"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>replace specific string in values</h1>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">[</span><span class="token string">'Column2'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">.</span>Column2<span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'b,?'</span> <span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="replace-string-by-nan"><a aria-hidden="true" class="anchor-heading" href="#replace-string-by-nan"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Replace string by Nan</h1>
<p>metadata_lat_lon_df = metadata_lat_lon_df.replace('nd', np.nan)</p>
<h1 id="here-we-observe-full-nana-rows-and-full-nan-columns-in-the-latest-df-we-drop-them"><a aria-hidden="true" class="anchor-heading" href="#here-we-observe-full-nana-rows-and-full-nan-columns-in-the-latest-df-we-drop-them"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Here we observe full NANA rows and full NAN columns in the latest df. We drop them</h1>
<p>selected_samples.dropna(how='all', inplace = True)
selected_samples.dropna(how='all', axis = 1, inplace = True) </p>
<h1 id="display-all-infos-of-a-df"><a aria-hidden="true" class="anchor-heading" href="#display-all-infos-of-a-df"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>display all infos of a df</h1>
<p>data_train.info(verbose=True, show_counts=True)</p>
<h1 id="drop-column-according-to-regex"><a aria-hidden="true" class="anchor-heading" href="#drop-column-according-to-regex"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>drop column according to regex</h1>
<pre class="language-python"><code class="language-python">df <span class="token operator">=</span> df<span class="token punctuation">[</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>regex<span class="token operator">=</span><span class="token string">'Test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre>
<h1 id="drop-columns-according-to-list"><a aria-hidden="true" class="anchor-heading" href="#drop-columns-according-to-list"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>drop columns according to list</h1>
<pre class="language-python"><code class="language-python"><span class="token comment"># %%</span>
colsToDrop <span class="token operator">=</span> <span class="token punctuation">[</span>     <span class="token string">'BARCODE'</span><span class="token punctuation">,</span>            <span class="token string">'PLATESET'</span><span class="token punctuation">,</span>                <span class="token string">'WELL'</span><span class="token punctuation">,</span>
            <span class="token string">'SUBSTANCE_NAME'</span><span class="token punctuation">,</span>        <span class="token string">'Full_Species'</span><span class="token punctuation">,</span>               <span class="token string">'Genus'</span><span class="token punctuation">,</span>
                  <span class="token string">'Sp_alone'</span><span class="token punctuation">,</span>             <span class="token string">'Species'</span><span class="token punctuation">,</span>             <span class="token string">'Famille'</span><span class="token punctuation">]</span>

df_merged_selected<span class="token operator">=</span>df_merged<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>colsToDrop<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
df_merged_selected

</code></pre>
<h1 id="if-na-replace-with-value-of-the-same-row-but-another-column"><a aria-hidden="true" class="anchor-heading" href="#if-na-replace-with-value-of-the-same-row-but-another-column"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>If Na replace with value of the same row but another column</h1>
<p><a href="https://stackoverflow.com/a/29177664">https://stackoverflow.com/a/29177664</a></p>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>Temp_Rating<span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">.</span>Farheit<span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">del</span> df<span class="token punctuation">[</span><span class="token string">'Farheit'</span><span class="token punctuation">]</span>
df<span class="token punctuation">.</span>columns <span class="token operator">=</span> <span class="token string">'File heat Observations'</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre>
<h1 id="extract-digits-from-a-string"><a aria-hidden="true" class="anchor-heading" href="#extract-digits-from-a-string"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Extract digits from a string</h1>
<p><a href="https://stackoverflow.com/a/37683738">https://stackoverflow.com/a/37683738</a></p>
<pre class="language-python"><code class="language-python">df<span class="token punctuation">.</span>A<span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token string">'(\d+)'</span><span class="token punctuation">)</span>
</code></pre>
<h1 id="create-multiples-columns-values-conditionally-using-npwhere"><a aria-hidden="true" class="anchor-heading" href="#create-multiples-columns-values-conditionally-using-npwhere"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Create multiples columns values conditionally using np.where</h1>
<p><a href="https://stackoverflow.com/a/19913845">https://stackoverflow.com/a/19913845</a></p>
<pre class="language-python"><code class="language-python">df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'Type'</span><span class="token punctuation">:</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'ABBC'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Set'</span><span class="token punctuation">:</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">'ZZXY'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
conditions <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Set'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> <span class="token operator">&#x26;</span> <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Set'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Z'</span><span class="token punctuation">)</span> <span class="token operator">&#x26;</span> <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
choices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'purple'</span><span class="token punctuation">]</span>
df<span class="token punctuation">[</span><span class="token string">'color'</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>select<span class="token punctuation">(</span>conditions<span class="token punctuation">,</span> choices<span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>

</code></pre>
<h1 id="drop-duplicates-according-to-multiple-coloumns"><a aria-hidden="true" class="anchor-heading" href="#drop-duplicates-according-to-multiple-coloumns"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>drop duplicates according to multiple coloumns</h1>
<p>DataFrame.drop_duplicates(subset=None, keep='first', inplace=False, ignore_index=False)
<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop_duplicates.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop_duplicates.html</a></p>
<p>df.drop_duplicates(subset=['a', 'b'], keep='first', inplace=True, ignore_index=False)</p>
<h1 id="append-df-created-in-a-for-loop"><a aria-hidden="true" class="anchor-heading" href="#append-df-created-in-a-for-loop"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>append df created in a for loop</h1>
<p><a href="https://stackoverflow.com/a/28670223">https://stackoverflow.com/a/28670223</a></p>
<p>appended_data = []
for infile in glob.glob("*.xlsx"):
data = pandas.read_excel(infile)</p>
<pre><code># store DataFrame in list
appended_data.append(data)
</code></pre>
<h1 id="see-pdconcat-documentation-for-more-info"><a aria-hidden="true" class="anchor-heading" href="#see-pdconcat-documentation-for-more-info"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>see pd.concat documentation for more info</h1>
<p>appended_data = pd.concat(appended_data)</p>
<h1 id="write-dataframe-to-an-excel-sheet"><a aria-hidden="true" class="anchor-heading" href="#write-dataframe-to-an-excel-sheet"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>write DataFrame to an excel sheet</h1>
<p>appended_data.to_excel('appended.xlsx')</p>