{"pageProps":{"note":{"id":"QnOOo86260d85beTWwNIt","title":"Sed_bash","desc":"","updated":1616339054310,"created":1609604978319,"custom":{},"fname":"cli.sed_bash","type":"note","vault":{"fsPath":"vault"},"contentHash":"355517e8cf5f097b2d264b7537461b3b","links":[{"type":"wiki","from":{"fname":"cli.sed_bash","id":"QnOOo86260d85beTWwNIt","vaultName":"vault"},"value":"tag.oneday","alias":"#oneday","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":23,"offset":23},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"tag.oneday"}},{"from":{"fname":"tools.dendron.biblio","vaultName":"vault"},"type":"backlink","position":{"start":{"line":26,"column":5,"offset":1120},"end":{"line":26,"column":21,"offset":1136},"indent":[]},"value":"cli.sed_bash","alias":"cli.sed_bash"},{"from":{"fname":"tools.dendron.biblio","vaultName":"vault"},"type":"backlink","position":{"start":{"line":30,"column":8,"offset":1195},"end":{"line":30,"column":24,"offset":1211},"indent":[]},"value":"cli.sed_bash","alias":"cli.sed_bash"}],"anchors":{"quick-replace-in-text-file":{"type":"header","text":"quick replace in text file","value":"quick-replace-in-text-file","line":66,"column":0,"depth":2}},"children":[],"parent":"e4C8xkTTKKue3fz5ywgBH","data":{},"schema":{"schemaId":"cli","moduleId":"cli"}},"body":"<h1 id=\"sed_bash\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#sed_bash\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Sed_bash</h1>\n<p><a title=\"Private\" style=\"color: brown\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\">#oneday (Private)</a>\nautomate with a sed script ? the bib cleaning </p>\n<p>Some sed black magic </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\\{\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|\"</span>\n</code></pre>\n<p>Double \\ to escape the \\</p>\n<p>And repeat </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\\{jhdgjshgjhfsjdhgf\\}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g;\"</span>\n</code></pre>\n<p>Now add input and outputs </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> library.bib <span class=\"token operator\">></span> library_formatted.bib\n</code></pre>\n<p>We'll try to automatize the process using <a href=\"https://stackoverflow.com/a/13807906\">https://stackoverflow.com/a/13807906</a> fswatch and alternative to inotifywatch on linux <a href=\"https://linux.die.net/man/1/inotifywatch\">https://linux.die.net/man/1/inotifywatch</a></p>\n<p>So here is the small bash script. It will take the command line arg 1 and add the _formatted prefix to it. Could be cleaner and directly extract the filename to accomodate for various type of extension. Not the point here. If any body has an idea, please contribute ! :point_down: </p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> <span class=\"token string\">\"<span class=\"token variable\">${1<span class=\"token operator\">%</span>.bib}</span>_formatted.bib\"</span>\n</code></pre>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># fullfilename=\"$(basename $1)\"</span>\n<span class=\"token comment\"># extension=\"${fullfilename##*.}\"</span>\n<span class=\"token comment\"># filename=\"${fullfilename%.*}\"</span>\n\n<span class=\"token comment\"># echo $fullfilename</span>\n<span class=\"token comment\"># echo $extension</span>\n<span class=\"token comment\"># echo $filename</span>\n\n<span class=\"token comment\">#echo \"File added: \" \"$(basename $1)\" \"$(basename $1)\"</span>\n<span class=\"token function\">sed</span> <span class=\"token string\">\"s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\{|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'{|g; s|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\}|<span class=\"token entity\" title=\"\\\\\">\\\\</span>\\'}|g\"</span> <span class=\"token string\">\"<span class=\"token variable\">$1</span>\"</span> <span class=\"token operator\">></span> <span class=\"token string\">\"./formatted_bib/<span class=\"token variable\">${filename}</span>_formatted.bib\"</span>\n\n</code></pre>\n<p>fswatch has been somehow a nightmare to understand ...</p>\n<p>to trouble shoot use the follwoing line to be sure of what exactly you take as input </p>\n<pre class=\"language-bash\"><code class=\"language-bash\">fswatch -0 ./mendeley_output/ <span class=\"token operator\">|</span> <span class=\"token function\">xargs</span> -0 -n1 -I<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"{}\"</span>\n</code></pre>\n<h2 id=\"quick-replace-in-text-file\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#quick-replace-in-text-file\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>quick replace in text file</h2>\n<p><code>sed -i 's/original/new/g' file.txt</code>ze</p>\n<hr>\n<strong>Backlinks</strong>\n<ul>\n<li><a href=\"/dendron-ws-public/notes/1zIrSWjXkUv4Lx4VeWLgj\">Biblio</a></li>\n</ul>","noteIndex":{"id":"gvOH1py1NfW3ihejtp1nt","title":"Root","desc":"","updated":1629628449617,"created":1629628449617,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"35415410233b3af68001893c83fd0c46","links":[{"type":"wiki","from":{"fname":"root","id":"gvOH1py1NfW3ihejtp1nt","vaultName":"vault"},"value":"user.oolonek","alias":"@oolonek","position":{"start":{"line":5,"column":7,"offset":225},"end":{"line":5,"column":15,"offset":233},"indent":[]},"xvault":false,"to":{"fname":"user.oolonek"}}],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1}},"children":["kPtYPP8JzWBTzWz6JpnkS","3LmAI71UuDJHeWZiY9h96","TyTThFOL2RNC8FAIj5bZN","e4C8xkTTKKue3fz5ywgBH","rInb8zzM4kEHelz4CeWDa","hUOQrqfgNFdSu7GD8fP2c","J9JmfJgjDT8Oz6WilFnKw","Iu50F9KOgYp0CDpwKBlx6","xZShWyRUMIXQaN30pKmCM","f1fsD9inrKMVapeKNhEhT","VhvHTRFNvIEee7odQvekB","D2j8S1AufMK6GbZTZ9BJz","HMvEFZAnQOxD77TnbVwGV","NYpAWkhSLKKkHIbDIbshA","0MSZusMXhweDvHD3Iggww","q5kFqQrTnytdWSux3nwOk","1PGMuBcw56lKG0Xu5sxIX","f4P2xBJLTHpQpJYiJh7BV","7KJGsaBJWOOHaHqElRaJq","BunyVngKi3As0C0CO5xhy","iRR8MxJPGIvfKl5pcOirA","3qcjidzC0tkyobYKlrWYc","uviazqrM9NUAMm9dWYVa7","53WWGL5wGfRDGtBEJoqBd","EoQW6Rm5LYkkCxMgDVXHd","k7IyxWpd9nYqWlhZ96CAG","maJAMIUSNCqgSTXrQ7fu5","59ftsVxFXXM9bB43vfKwK","rrfMr3vOgkyJv21N8x99X","7WpN3kiuBsunRJ17P3mGr","u88hb42Nk8jvzQwtMfM3z"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top. \n\nKudos @oolonek, you did great job! \nWhen using https://oolonek.github.io/dendron-ws-private/, here is what I got:\n\n<img width=\"1676\" alt=\"Capture d’écran 2021-08-22 à 13 19 54\" src=\"https://user-images.githubusercontent.com/44283913/130353241-43ba98eb-d947-473c-be08-d924f0ef585b.png\">\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","siteUrl":"https://oolonek.github.io","gh_edit_link":true,"gh_edit_link_text":"Click here to edit this page on Github !","gh_edit_repository":"https://github.com/oolonek/dendron-ws-public","gh_edit_branch":"main","gh_edit_view_mode":"edit","assetsPrefix":"/dendron-ws-public","usePrettyRefs":true,"siteLastModified":true,"title":"GrndStt's Dendron","description":"Personal knowledge space","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_root":"docs/","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.77.1","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false}}},"__N_SSG":true}