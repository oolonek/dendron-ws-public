{"pageProps":{"note":{"id":"zlom9oPAa3I4uyFxy8gvi","title":"Mandelbrot","desc":"","updated":1612800007709,"created":1608048463386,"custom":{},"fname":"tools.chemoinformatics.qiime.empress.mandelbrot","type":"note","vault":{"fsPath":"vault"},"contentHash":"861ffd70ce1adb8d1cf7c994a7178481","links":[],"anchors":{"a-qiime-recipee-for-empress-display-of-the-pf_project":{"type":"header","text":"A Qiime recipee for Empress display of the pf_project","value":"a-qiime-recipee-for-empress-display-of-the-pf_project","line":8,"column":0,"depth":1},"required-inputs":{"type":"header","text":"Required inputs","value":"required-inputs","line":10,"column":0,"depth":2},"first-we-deal-with-the-tree-file":{"type":"header","text":"First we deal with the tree file","value":"first-we-deal-with-the-tree-file","line":21,"column":0,"depth":1},"the-we-deal-with-the-feature-table":{"type":"header","text":"the we deal with the feature table","value":"the-we-deal-with-the-feature-table","line":28,"column":0,"depth":1},"first-we-use-biom-to-convert-the-tsv-to-the-biom-format":{"type":"header","text":"First we use biom to convert the tsv to the biom format","value":"first-we-use-biom-to-convert-the-tsv-to-the-biom-format","line":30,"column":0,"depth":2},"conversion-to-qiime-featuretable":{"type":"header","text":"Conversion to qiime featureTable","value":"conversion-to-qiime-featuretable","line":37,"column":0,"depth":2},"we-empress-the-whole-shit":{"type":"header","text":"We EMPRESS the whole shit","value":"we-empress-the-whole-shit","line":44,"column":0,"depth":2},"we-infer-branch-lenght":{"type":"header","text":"we infer branch lenght","value":"we-infer-branch-lenght","line":65,"column":0,"depth":1},"we-root-the-tree":{"type":"header","text":"we root the tree","value":"we-root-the-tree","line":70,"column":0,"depth":1},"wd_tree_len_rooted---rootwd_tree_len-outgroup--methanobacterium-resolveroot--true":{"type":"header","text":"wd_tree_len_rooted <- root(wd_tree_len, outgroup = \"Methanobacterium\", resolve.root = TRUE)","value":"wd_tree_len_rooted---rootwd_tree_len-outgroup--methanobacterium-resolveroot--true","line":72,"column":0,"depth":1},"lets-add-some-metadata-for-the-feature-table-viz":{"type":"header","text":"Lets add some metadata for the feature table viz","value":"lets-add-some-metadata-for-the-feature-table-viz","line":82,"column":0,"depth":1},"metadata-viz":{"type":"header","text":"metadata viz","value":"metadata-viz","line":89,"column":0,"depth":2},"lets-try-some-metadat-based-filtering-of-the-feature-table":{"type":"header","text":"lets try some metadat based filtering of the feature table","value":"lets-try-some-metadat-based-filtering-of-the-feature-table","line":95,"column":0,"depth":2}},"children":[],"parent":"FNTnyMdvggc3hlu0FbWoR","data":{}},"body":"<h1 id=\"mandelbrot\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#mandelbrot\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Mandelbrot</h1>\n<h1 id=\"a-qiime-recipee-for-empress-display-of-the-pf_project\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#a-qiime-recipee-for-empress-display-of-the-pf_project\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>A Qiime recipee for Empress display of the pf_project</h1>\n<h2 id=\"required-inputs\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#required-inputs\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Required inputs</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> a feature table (mzmine output)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> a sample metadata table</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> a feature metadata table</li>\n</ul>\n<p>Beware of the confusion between samples and features. In Qiime features refer to OTU and thus have an assigned taxonomy. I our case we have the taxonomy assigned to the samples.</p>\n<h1 id=\"first-we-deal-with-the-tree-file\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#first-we-deal-with-the-tree-file\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>First we deal with the tree file</h1>\n<p>qiime tools import \\\n--input-path otol_tree_rooted.tre \\\n--output-path otol_tree_rooted.qza \\\n--type 'Phylogeny[Rooted]'</p>\n<h1 id=\"the-we-deal-with-the-feature-table\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#the-we-deal-with-the-feature-table\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>the we deal with the feature table</h1>\n<h2 id=\"first-we-use-biom-to-convert-the-tsv-to-the-biom-format\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#first-we-use-biom-to-convert-the-tsv-to-the-biom-format\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>First we use biom to convert the tsv to the biom format</h2>\n<p>biom convert \\\n-i feature_table.tsv \\\n-o feature_table.biom \\\n--table-type=\"OTU table\" \\\n--to-hdf5</p>\n<h2 id=\"conversion-to-qiime-featuretable\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#conversion-to-qiime-featuretable\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Conversion to qiime featureTable</h2>\n<p>qiime tools import \\\n--type 'FeatureTable[Frequency]' \\\n--input-path feature_table.biom \\\n--output-path feature_table.qza</p>\n<h2 id=\"we-empress-the-whole-shit\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#we-empress-the-whole-shit\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>We EMPRESS the whole shit</h2>\n<p>qiime empress community-plot \\\n--i-tree otol_tree_rooted.qza \\\n--i-feature-table feature_table.qza \\\n--m-sample-metadata-file sample_metadata.tsv \\\n--m-feature-metadata-file feature_taxa.tsv \\\n--o-visualization empress-tree.qzv \\\n--p-filter-missing-features \\\n--p-ignore-missing-samples</p>\n<p>Sadly we get the follwoing message</p>\n<p>Plugin error from empress:</p>\n<p>  At least one non-root branch of the tree must have a positive length.</p>\n<p>We thus try to compute branch lenght in R using the ape package</p>\n<h1 id=\"we-infer-branch-lenght\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#we-infer-branch-lenght\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>we infer branch lenght</h1>\n<p>taxa_tree &#x3C;-compute.brlen(taxa_tree)\ntaxa_tree &#x3C;- read.tree('Dropbox/Research_UNIGE/git_repos/qiime-empress-formatter/src/python/otol_tree.tre')</p>\n<h1 id=\"we-root-the-tree\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#we-root-the-tree\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>we root the tree</h1>\n<h1 id=\"wd_tree_len_rooted---rootwd_tree_len-outgroup--methanobacterium-resolveroot--true\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#wd_tree_len_rooted---rootwd_tree_len-outgroup--methanobacterium-resolveroot--true\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>wd_tree_len_rooted &#x3C;- root(wd_tree_len, outgroup = \"Methanobacterium\", resolve.root = TRUE)</h1>\n<p>is.rooted(taxa_tree)</p>\n<p>write.tree(taxa_tree, '~/tmp/empress-tutorial/ecometabo_toyset/ecometabo_taxa_tree_rooted.tree')</p>\n<p>write.tree(taxa_tree, 'Dropbox/Research_UNIGE/git_repos/qiime-empress-formatter/src/python/otol_tree_rooted.tre')</p>\n<h1 id=\"lets-add-some-metadata-for-the-feature-table-viz\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#lets-add-some-metadata-for-the-feature-table-viz\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>Lets add some metadata for the feature table viz</h1>\n<p>qiime feature-table summarize \\\n--i-table feature_table.qza \\\n--o-visualization feature_table_viz.qzv \\\n--m-sample-metadata-file sample_metadata.tsv</p>\n<h2 id=\"metadata-viz\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#metadata-viz\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>metadata viz</h2>\n<p>qiime metadata tabulate \\\n--m-input-file sample_metadata.tsv \\\n--o-visualization sample_metadata.qzv</p>\n<h2 id=\"lets-try-some-metadat-based-filtering-of-the-feature-table\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#lets-try-some-metadat-based-filtering-of-the-feature-table\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>lets try some metadat based filtering of the feature table</h2>\n<p>qiime feature-table filter-samples \\\n--i-table feature_table.qza \\\n--m-metadata-file sample_metadata.tsv \\\n--p-where \"[Taxonomical_Score_ISDB]>0\" \\\n--o-filtered-table taxscore-filtered-feature_table.qza</p>\n<p>qiime feature-table filter-samples \\\n--i-table feature-contingency-filtered-table.qza \\\n--m-metadata-file sample_metadata.tsv \\\n--p-where \"[Consensus_class_ci_cf]!='nan'\" \\\n--o-filtered-table nan-filtered-table.qza</p>\n<p>qiime empress community-plot \\\n--i-tree otol_tree_rooted.qza \\\n--i-feature-table taxscore-filtered-feature_table.qza \\\n--m-sample-metadata-file sample_metadata.tsv \\\n--m-feature-metadata-file feature_taxa.tsv \\\n--m-feature-metadata-file metadata_otoled.tsv \\\n--o-visualization empress-tree.qzv \\\n--p-filter-missing-features \\\n--p-ignore-missing-samples</p>","noteIndex":{"id":"gvOH1py1NfW3ihejtp1nt","title":"Root","desc":"","updated":1629628449617,"created":1629628449617,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":"vault"},"contentHash":"35415410233b3af68001893c83fd0c46","links":[{"type":"wiki","from":{"fname":"root","id":"gvOH1py1NfW3ihejtp1nt","vaultName":"vault"},"value":"user.oolonek","alias":"@oolonek","position":{"start":{"line":5,"column":7,"offset":225},"end":{"line":5,"column":15,"offset":233},"indent":[]},"xvault":false,"to":{"fname":"user.oolonek"}}],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1}},"children":["kPtYPP8JzWBTzWz6JpnkS","3LmAI71UuDJHeWZiY9h96","TyTThFOL2RNC8FAIj5bZN","e4C8xkTTKKue3fz5ywgBH","rInb8zzM4kEHelz4CeWDa","hUOQrqfgNFdSu7GD8fP2c","J9JmfJgjDT8Oz6WilFnKw","Iu50F9KOgYp0CDpwKBlx6","xZShWyRUMIXQaN30pKmCM","f1fsD9inrKMVapeKNhEhT","VhvHTRFNvIEee7odQvekB","D2j8S1AufMK6GbZTZ9BJz","HMvEFZAnQOxD77TnbVwGV","NYpAWkhSLKKkHIbDIbshA","0MSZusMXhweDvHD3Iggww","q5kFqQrTnytdWSux3nwOk","1PGMuBcw56lKG0Xu5sxIX","f4P2xBJLTHpQpJYiJh7BV","7KJGsaBJWOOHaHqElRaJq","BunyVngKi3As0C0CO5xhy","iRR8MxJPGIvfKl5pcOirA","3qcjidzC0tkyobYKlrWYc","uviazqrM9NUAMm9dWYVa7","53WWGL5wGfRDGtBEJoqBd","EoQW6Rm5LYkkCxMgDVXHd","k7IyxWpd9nYqWlhZ96CAG","maJAMIUSNCqgSTXrQ7fu5","59ftsVxFXXM9bB43vfKwK","rrfMr3vOgkyJv21N8x99X","7WpN3kiuBsunRJ17P3mGr","u88hb42Nk8jvzQwtMfM3z"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top. \n\nKudos @oolonek, you did great job! \nWhen using https://oolonek.github.io/dendron-ws-private/, here is what I got:\n\n<img width=\"1676\" alt=\"Capture d’écran 2021-08-22 à 13 19 54\" src=\"https://user-images.githubusercontent.com/44283913/130353241-43ba98eb-d947-473c-be08-d924f0ef585b.png\">\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["root"],"siteRootDir":"docs","siteUrl":"https://oolonek.github.io","gh_edit_link":true,"gh_edit_link_text":"Click here to edit this page on Github !","gh_edit_repository":"https://github.com/oolonek/dendron-ws-public","gh_edit_branch":"main","gh_edit_view_mode":"edit","assetsPrefix":"/dendron-ws-public","usePrettyRefs":true,"siteLastModified":true,"title":"GrndStt's Dendron","description":"Personal knowledge space","duplicateNoteBehavior":{"action":"useVault","payload":["vault"]},"usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_root":"docs/","writeStubs":true,"siteIndex":"root"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2,"vaultSelectionModeOnCreate":"smart"}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.77.1","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"enableUserTags":true,"enableHashTags":true,"enableEditorDecorations":true},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false}}},"__N_SSG":true}